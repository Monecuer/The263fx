(()=>{var e={};e.id=702,e.ids=[702],e.modules={2213:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=2213,e.exports=webpackEmptyContext},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},8709:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},5206:e=>{"use strict";e.exports=require("zlib")},7304:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=r(7096),a=r(6132),i=r(7284),n=r.n(i),l=r(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7499)),"C:\\Users\\LENOVO\\OneDrive\\Desktop\\the263fx\\The263fx\\src\\app\\dashboard\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4553)),"C:\\Users\\LENOVO\\OneDrive\\Desktop\\the263fx\\The263fx\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\LENOVO\\OneDrive\\Desktop\\the263fx\\The263fx\\src\\app\\dashboard\\page.jsx"],p="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5433:(e,t,r)=>{Promise.resolve().then(r.bind(r,706))},706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>DashboardPage});var s=r(784),a=r(9885),i=r(7114),n=r(219),l=r(3679),o=r(858),c=r(7231),d=r(5140),p=r(1698);let x=(0,c.loadStripe)(process.env.NEXT_PUBLIC_STRIPE_KEY);function DashboardPage(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(null),[c,u]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[b,g]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[j,w]=(0,a.useState)(null),[N,v]=(0,a.useState)("");(0,a.useEffect)(()=>{(async function(){let{data:{user:t},error:s}=await n.O.auth.getUser();if(s||!t)return e.push("/login");r(t);let{data:a}=await n.O.from("courses").select("*");u(a);let{data:i}=await n.O.from("enrollments").select("course_id, courses(name, description, video_url)").eq("user_id",t.id);h(i.map(e=>({id:e.course_id,name:e.courses.name,description:e.courses.description,videoUrl:e.courses.video_url})));let{data:l}=await n.O.from("payments").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});g(l),y(!1)})()},[e]);let cancel=()=>{w(null),v("")};async function binancePay(e){let t=await fetch("/api/createBinance",{method:"POST",body:JSON.stringify({courseId:e})}).then(e=>e.json());v(t.qrCodeUrl),w(e=>({...e,payment:"binance"}))}return f?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white text-xl",children:"Loading your dashboard..."}):(0,s.jsxs)("div",{className:"dashboard max-w-6xl mx-auto p-6 bg-gray-900 min-h-screen text-white space-y-8",children:[(0,s.jsxs)("header",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,s.jsxs)("h1",{className:"flex items-center gap-2 text-3xl font-bold text-blue-400",children:[s.jsx(o.m3W,{})," Hello, ",t.email.split("@")[0]]}),(0,s.jsxs)("button",{onClick:async()=>{await n.O.auth.signOut(),e.push("/login")},className:"btn-danger bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded flex items-center gap-2",children:[s.jsx(o.fHX,{})," Logout"]})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"flex items-center gap-2 text-2xl font-semibold mb-4",children:[s.jsx(o.FeP,{})," Shop Courses"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:c.map(e=>{let t=m.find(t=>t.id===e.id);return(0,s.jsxs)(l.E.div,{className:"course-card p-4 rounded-lg bg-white/10 border border-white/20 cursor-pointer hover:bg-white/20 transition",onClick:()=>w(e),whileHover:{scale:1.03},children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.name}),s.jsx("p",{className:"text-gray-300 text-sm",children:e.description}),t?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 mt-2 text-green-400 font-semibold",children:[s.jsx(o.FJM,{})," Enrolled"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"inline-block mt-2 text-yellow-400 font-bold text-lg",children:["$",e.price]}),s.jsx("span",{className:"inline-block ml-2 text-xs px-2 py-1 rounded bg-yellow-500/80 text-black font-semibold",children:e.price<100?"20% off":e.price<200?"36% off":"50% off"})]})]},e.id)})})]}),j&&!m.find(e=>e.id===j.id)&&s.jsx("div",{className:"pay-modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg max-w-3xl w-full space-y-6 overflow-auto max-h-[90vh]",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold mb-4",children:['Buy "',j.name,'" for $',j.price]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Card (Stripe)"}),s.jsx(d.eK,{stripe:x,children:s.jsx(function({course:t}){let r=(0,d.MD)(),a=(0,d.lq)(),pay=async()=>{let{data:{clientSecret:s}}=await fetch("/api/createStripePayment",{method:"POST",body:JSON.stringify({courseId:t.id})}).then(e=>e.json()),i=await r.confirmCardPayment(s,{payment_method:{card:a.getElement(d.NZ)}});i.error?alert(i.error.message):(e.refresh(),cancel())};return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(d.NZ,{className:"p-3 border rounded bg-white"}),(0,s.jsxs)("button",{onClick:pay,className:"btn-primary bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded w-full",children:["Pay $",t.price," with Card"]})]})},{course:j})})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Card (Flutterwave)"}),s.jsx(p.default,{className:"btn-primary bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded w-full",config:{public_key:process.env.NEXT_PUBLIC_FLW_KEY,tx_ref:Date.now().toString(),amount:j.price,currency:"USD",redirect_url:window.location.href},callback:t=>{"successful"===t.status&&e.refresh()}})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Binance Pay"}),N?s.jsx("img",{src:N,alt:"Binance QR",className:"w-48 h-48 mx-auto"}):s.jsx("button",{className:"btn-primary bg-yellow-500 hover:bg-yellow-600 text-black py-2 px-4 rounded w-full",onClick:()=>binancePay(j.id),children:"Generate QR"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Crypto"}),s.jsx(function({course:r}){return(0,s.jsxs)("form",{onSubmit:async s=>{s.preventDefault();let a=s.target.receipt.files[0],{data:i}=await n.O.storage.from("receipts").upload(`${t.id}/${Date.now()}`,a),l=n.O.storage.from("receipts").getPublicUrl(i.path).publicUrl;await fetch("/api/recordPayment",{method:"POST",body:JSON.stringify({courseId:r.id,amount:r.price,method:"crypto",txRef:"",receiptUrl:l,status:"pending"})}),e.refresh(),cancel()},className:"space-y-2",children:[(0,s.jsxs)("p",{children:["Send BTC/USDT to address: ",s.jsx("b",{children:process.env.NEXT_PUBLIC_CRYPTO_ADDR})]}),s.jsx("input",{type:"file",name:"receipt",required:!0,className:"block w-full text-sm text-gray-900 border border-gray-300 rounded cursor-pointer bg-gray-50"}),s.jsx("button",{type:"submit",className:"btn-primary bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded w-full",children:"Upload Receipt & Enroll"})]})},{course:j})]})]}),s.jsx("button",{className:"btn-secondary mt-4 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded w-full",onClick:cancel,children:"Cancel"})]})}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"flex items-center gap-2 text-2xl font-semibold mb-4",children:[s.jsx(o.Mp$,{})," Your Enrolled Courses"]}),0===m.length?s.jsx("p",{children:"You havenâ€™t enrolled yet."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.map(e=>(0,s.jsxs)(l.E.div,{className:"course-card p-4 rounded-lg bg-white/10 border border-white/20",whileHover:{scale:1.02},children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsxs)("a",{href:e.videoUrl,target:"_blank",rel:"noreferrer",className:"btn-primary inline-flex items-center gap-2 mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded",children:[s.jsx(o.KoQ,{})," Watch Video"]})]},e.id))})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"flex items-center gap-2 text-2xl font-semibold mb-4",children:[s.jsx(o.ypE,{})," Your Payments"]}),0===b.length?s.jsx("p",{children:"No payment history."}):s.jsx("ul",{className:"payments-list space-y-2",children:b.map(e=>(0,s.jsxs)("li",{className:"flex items-center gap-4 border-b border-gray-700 pb-2",children:[(0,s.jsxs)("span",{children:["$",e.amount]}),s.jsx("span",{className:"capitalize",children:e.method}),s.jsx("span",{className:"paid"===e.status?"text-green-400":"text-yellow-400",children:e.status}),s.jsx("span",{children:new Date(e.created_at).toLocaleDateString()}),e.receipt_url?s.jsx("a",{href:e.receipt_url,target:"_blank",rel:"noreferrer",className:"text-blue-400 hover:text-blue-600",children:s.jsx(o.aBF,{})}):s.jsx(o.G5m,{className:"text-red-500"})]},e.id))})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"flex items-center gap-2 text-2xl font-semibold mb-4",children:[s.jsx(o.AGi,{})," Support & Groups"]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("a",{href:"https://t.me/your-telegram-group",target:"_blank",rel:"noreferrer",className:"btn-primary bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center gap-2",children:[s.jsx(o.AGi,{})," Telegram Group"]}),(0,s.jsxs)("a",{href:"https://chat.whatsapp.com/Fe5m0T1WJxQ6QMaMhwCDTp?mode=ac_c",target:"_blank",rel:"noreferrer",className:"btn-primary bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded flex items-center gap-2",children:[s.jsx(o.xpo,{})," WhatsApp Group"]}),(0,s.jsxs)("a",{href:"mailto:support@the263fx.com",className:"btn-secondary bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded flex items-center gap-2",children:[s.jsx(o.gjK,{})," Email Support"]})]})]})]})}},219:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var s=r(2730);let a=(0,s.createClient)("https://utoclzjvigrygpcxkvgz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV0b2Nsemp2aWdyeWdwY3hrdmd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5NzI5MTEsImV4cCI6MjA2NzU0ODkxMX0.VY_G021bkWFu4PjnZHG7OAJXFU6xVrbOo4AnuotkEsM")},7499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=r(5153);let a=(0,s.createProxy)(String.raw`C:\Users\LENOVO\OneDrive\Desktop\the263fx\The263fx\src\app\dashboard\page.jsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[472,673,679,911,500,885],()=>__webpack_exec__(7304));module.exports=r})();